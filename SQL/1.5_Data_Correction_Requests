--Создание пустой таблицы

--Создание таблицы осуществляется с помощью запроса CREATE, подробно рассмотренного в первом уроке модуля.

--Задание
--Создать таблицу поставка (supply), которая имеет ту же структуру, что и таблиц book.

--Поле	Тип, описание
supply_id	INT PRIMARY KEY AUTO_INCREMENT
title	VARCHAR(50)
author	VARCHAR(30)
price	DECIMAL(8, 2)
amount	INT

CREATE TABLE supply (
                supply_id INT PRIMARY KEY AUTO_INCREMENT,
                title VARCHAR (50),
                author VARCHAR (30),
                price DECIMAL (8, 2),
                amount INT
                );

--------------------------------------------------------------------------------------------------------------------

--Добавление записей в таблицу

--Добавление одной записи в таблицу осуществляется с помощью запроса INSERT, подробно рассмотренного в первом уроке.
-- Запросы обязательно разделять точкой с запятой.

--Допускается вставка нескольких записей одновременно, для этого используется SQL запрос следующего вида:

INSERT INTO имя_таблицы(столбец_1, столбец_2, ..., столбец_N)
VALUES
    (значение_1_1, значение_1_2, ..., значение_1_N),
    (значение_2_1, значение_2_2, ..., значение_2_N),
    ...
    (значение_M_1, значение_M_2, ..., значение_M_N);

--Например, чтобы добавить в таблицу book две новые записи используется запрос:

INSERT INTO book (title, author, price, amount)
VALUES
    ('Война и мир','Толстой Л.Н.', 1070.20, 2),
    ('Анна Каренина', 'Толстой Л.Н.', 599.90, 3);

--Задание
--Занесите в таблицу supply четыре записи, чтобы получилась следующая таблица:
--
--supply_id	title	author	price	amount
--1	Лирика	Пастернак Б.Л.	518.99	2
--2	Черный человек 	Есенин С.А.	570.20	6
--3	Белая гвардия	Булгаков М.А.	540.50	7
--4	Идиот	Достоевский Ф.М.	360.80	3

INSERT INTO supply (title, author, price, amount)
VALUES
        ('Лирика', 'Пастернак Б.Л.', 518.99, 2),
        ('Черный человек', 'Есенин С.А.', 570.20, 6),
        ('Белая гвардия', 'Булгаков М.А.', 540.50, 7),
        ('Идиот', 'Достоевский Ф.М.', 360.80, 3);

---------------------------------------------------------------------------------------------------------------------

--Добавление записей из другой таблицы

--С помощью запроса на добавление можно не только добавить в таблицу конкретные значения (список VALUES), но и записи
-- из другой таблицы, отобранные с помощью запроса на выборку.  В этом случае вместо раздела VALUES записывается запрос
--  на выборку, начинающийся с SELECT.  В нем можно использовать WHERE, GROUP BY, ORDER BY.

--Правила соответствия между полями таблицы и вставляемыми значениями из запроса:

--1. количество полей в таблице и количество полей в запросе должны совпадать;
--2. должно существовать прямое соответствие между позицией одного и того же элемента в обоих списках, поэтому первый
-- столбец запроса должен относиться к первому столбцу в списке столбцов таблицы, второй – ко второму столбцу и т.д.
-- 3. типы столбцов запроса должны быть совместимы с типами данных соответствующих столбцов таблицы ( целое число можно
--  занести в поле типа DECIMAL, обратная операция – недопустима).

--Пример

--Занести все книги из таблицы supply в таблицу book.

--Запрос:

INSERT INTO book (title, author, price, amount)
SELECT title, author, price, amount
FROM supply;

SELECT * FROM book;
Результат:

--Affected rows: 4
--Query result:
--+---------+-----------------------+------------------+--------+--------+
--| book_id | title                 | author           | price  | amount |
--+---------+-----------------------+------------------+--------+--------+
--| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |
--| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |
--| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |
--| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |
--| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |
--| 6       | Лирика                | Пастернак Б.Л.   | 518.99 | 2      |
--| 7       | Черный человек        | Есенин С.А.      | 570.20 | 6      |
--| 8       | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |
--| 9       | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |
--+---------+-----------------------+------------------+--------+--------+
--Affected rows: 9

--С помощью этого запроса в таблицу book включены все книги из supply, даже те, которые в book уже есть
-- («Белая гвардия» и «Идиот»). В результате в таблице одна и та же книга, например «Белая гвардия», имеет
--  код 2 и 8. Для реляционной модели это нежелательная ситуация. Устранить эту проблему можно с помощью вложенных
--   запросов, которые будут рассмотрены в следующем шаге.

--Задание
--Добавить из таблицы supply в таблицу book, все книги, кроме книг, написанных Булгаковым М.А. и Достоевским Ф.М.

INSERT INTO book (title, author, price, amount)
SELECT title, author, price, amount
FROM supply
WHERE title NOT IN ('Белая гвардия', 'Идиот');

SELECT *
FROM book;

--Affected rows: 2
--Query result:
--+---------+-----------------------+------------------+--------+--------+
--| book_id | title                 | author           | price  | amount |
--+---------+-----------------------+------------------+--------+--------+
--| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |
--| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |
--| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |
--| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |
--| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |
--| 6       | Лирика                | Пастернак Б.Л.   | 518.99 | 2      |
--| 7       | Черный человек        | Есенин С.А.      | 570.20 | 6      |
--+---------+-----------------------+------------------+--------+--------+

----------------------------------------------------------------------------------------------------------------------
